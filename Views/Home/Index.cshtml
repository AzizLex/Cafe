@model IList<Cafe.Models.Gallery>

@{
    ViewData["Title"] = "";
}

<div class="home-welcome">
    <div class="fading w-100 text-center">
        <div class="fading-centered d-flex w-100 align-items-center justify-content-center">
            <div class="col col-lg-1">
                <svg class="svg-index d-none d-lg-block" viewBox="0 -5 100 10" xmlns="http://www.w3.org/2000/svg">
                    <line x1="0" y1="0" x2="100%" y2="0" /></svg>
            </div>
            <div class="col-lg-auto mx-2 align-content-center">
                <h1>Välkommen!</h1>
            </div>
            <div class="col col-lg-1">
                <svg class="svg-index d-none d-lg-block" viewBox="0 -5 100 10" xmlns="http://www.w3.org/2000/svg">
                    <line x1="0" y1="0" x2="100%" y2="0" /></svg>
            </div>
        </div>
        <i id="arrow-down" class="fading-bottom bi bi-arrow-down-circle-fill"></i>
    </div>
</div>
<div id="slider"></div>
<div id="sliderBg"></div>

<div class="container p-lg-5 bg-light">
    <div class="row my-4 py-lg-5 my-lg-5">
        <div id="frame-img-left" class="p-0 col-lg-6 offset-lg-1 order-2 order-lg-1">
            <img class="img-fluid" src="https://picsum.photos/id/153/4763/3155.jpg">
        </div>
        <div id="frame-text-right" class="p-2 px-lg-3 col-lg-3 order-1 order-lg-2 d-flex flex-column align-items-start">
            <h3 class="pb-1 mb-3">Öppettider</h3>
            <ul>
                <li><span class="opening1"></span></li>
                <li><span class="opening2"></span></li>
            </ul>
            <p class="fst-italic">Gratis parkering</p>
        </div>
    </div>
    <div class="row my-4 py-lg-5 my-lg-5">
        <div id="frame-text-left" class="p-2 pe-lg-4 col-lg-3 offset-lg-1 d-flex flex-column align-items-start">
            <div>
                <h3>Mat och dryck</h3>
            </div>
            <div>
                <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mi tellus, volutpat sit amet efficitur id, venenatis et metus. Mauris laoreet eros eget est consequat, ut rhoncus tortor accumsan.</p>
            </div>
            <div class="mt-auto">
                <a class="btn btn-light" asp-area="" asp-controller="Menu" asp-action="Index">Se vår meny</a>
            </div>
        </div>
        <div id="frame-img-right" class="p-0 col-lg-6">
            <img class="img-fluid" src="https://picsum.photos/id/163/2000/1333.jpg">
        </div>
    </div>
    <div class="row my-4 py-lg-5 my-lg-5">
        <div id="frame-img-left" class="p-0 col-lg-6 offset-lg-1 order-2 order-lg-1">
            <div id="carouselExampleCaptions" class="carousel slide" data-bs-ride="carousel">
                <div class="carousel-indicators">
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
                    <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
                </div>
                <div class="carousel-inner">
                    <div class="carousel-item active">
                        <img class="d-block w-100" src="https://picsum.photos/id/2/5616/3744.jpg">
                        <div class="carousel-caption d-none d-lg-block">
                            <h5>Sal 1</h5>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mi tellus, volutpat sit amet efficitur id.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="https://picsum.photos/id/163/2000/1333.jpg">
                        <div class="carousel-caption d-none d-lg-block">
                            <h5>Sal 2</h5>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mi tellus, volutpat sit amet efficitur id.</p>
                        </div>
                    </div>
                    <div class="carousel-item">
                        <img class="d-block w-100" src="https://picsum.photos/id/153/4763/3155.jpg">
                        <div class="carousel-caption d-none d-lg-block">
                            <h5>Sal 3</h5>
                            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mi tellus, volutpat sit amet efficitur id.</p>
                        </div>
                    </div>
                </div>
                <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Previous</span>
                </button>
                <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="visually-hidden">Next</span>
                </button>
            </div>
        </div>
        <div id="frame-text-right" class="p-2 px-lg-3 col-lg-3 order-1 order-lg-2 d-flex flex-column align-items-start">
            <h3 class="pb-1 mb-3">Våra lokaler</h3>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse mi tellus, volutpat sit amet efficitur id, venenatis et metus. Mauris laoreet eros eget est consequat, ut rhoncus tortor accumsan.</p>
            <a class="btn btn-light" asp-area="" asp-controller="Venue" asp-action="Index">Hyr en lokal</a>
        </div>
    </div>
    <div class="w-100 pb-1 my-4 py-lg-3 mt-lg-5 mb-lg-3 mx-auto index-gallery-div">
        <h3 class="text-center">Tidigare evenemang</h3>
        <div class="row index-gallery-list">
            @foreach (var item in Model)
            {@if (item.Images.FirstOrDefault() != null)
                {
                    <div class="col-9 col-lg-5 col-xl-3 m-2 mx-sm-3 my-sm-4">
                        <a asp-controller="Gallery" asp-action="Index">
                            <div class="ratio ratio-4x3">
                                <img class="index-pic-square img-fluid" loading="lazy" src="@item.Images.FirstOrDefault().URL" onerror="this.onerror=null; this.src='/image/placeholder.png'" alt="@item.Name" title="@item.Name">
                            </div>
                        </a>
                    </div>
                }
            }
        </div>
    </div>
</div>

@section Scripts {
    <script>
        scrollFunction();
        window.onscroll = function () { scrollFunction() };
        function scrollFunction() {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                $("#main-navbar").removeClass("main-navbar-nbg");
                $("#main-navbar").addClass("main-navbar-bg");
            }
            else {
                $("#main-navbar").removeClass("main-navbar-bg");
                $("#main-navbar").addClass("main-navbar-nbg");
            }
        }

        $(".navbar-toggler").click(function () {
            if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
            }
            else {
                $("#main-navbar").toggleClass("main-navbar-bg");
            }
        });

        var slideCounter = 0;
        var slides = [];
        @foreach (var item in ViewBag.HomeSlides)
        {
            @:slides.push('@if(item.Contains("http")){@item} else {@(".."+item)}');
        }
        setInterval(loopSlide, 5000);
        loopSlide();

        function changeBg() {
            $("#slider").css('background-image', 'url("' + slides[slideCounter] + '")');
            slideCounter++;
            if (slideCounter == slides.length) {
                slideCounter = 0;
            }

            $("#slider").fadeIn(100, function () {
                $("#sliderBg").css('background-image', 'url("' + slides[slideCounter] + '")');
            });

        }

        function loopSlide() {
            $("#slider").fadeOut(3000, changeBg);

        }

    </script>
}
